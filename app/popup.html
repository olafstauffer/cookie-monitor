<!doctype html>
<html lang="en" ng-app="CookieMonitorApp" ng-csp>
<head>
	<title>Cookie Monitor</title>
	
	<meta charset="UTF-8">

	<!-- build:css styles/vendor.css -->
	<!-- bower:css -->
	<link rel="stylesheet" href="/bower_components/ng-grid/ng-grid.min.css" />
	<!-- endbower -->

	<!-- grunt task bower-install does not get the following -->
	<link rel="stylesheet" href="bower_components/angular/angular-csp.css">
	<!-- endbuild -->

	<!-- build:css styles/main.css -->
	<link rel="stylesheet" href="styles/popup.css">
	<!-- endbuild -->

</head>
<body>
	<header>
		<h2>Cookie Monitor</h2>
	</header>

	<div ng-controller="PageController">
		<div id="cookieTable" ng-grid="cookieTableConfig"></div>
		<div>
			<button ng-click="clearSelection()">Clear Selection</button>
			<button ng-click="clearCookieLog()">Clear Cookie Log</button>
		</div>

		<!-- TODO: refactor -->
		<div id="currentCookie" ng-show="!isEmpty(currentCookie)">
			<div class="cookieDetailRow">
				<span class="cookieDetailTitle">date:</span><span class="cookieDetailValue">{{currentCookie.ts | date:'yyyy-MM-ddTHH:mm:ss.sssZ'}}</span>
				<span class="cookieDetailTitle">name:</span><span class="cookieDetailValue">{{currentCookie.name}}</span>
				<div class="cookieDetailFlags">
					<span class="cookieDetailTitle">secure:</span>
					{{currentCookie.secure == "true" ? "&#x2611;" : "&#x2610;"}}
					<span class="cookieDetailTitle">httpOnly:</span>
					{{currentCookie.httponly == "true" ? "&#x2611;" : "&#x2610;"}}
					<span class="cookieDetailTitle">hostOnly:</span>
					{{currentCookie.hostonly == "true" ? "&#x2611;" : "&#x2610;"}}
				</div>
			</div>
			<div class="cookieDetailRow">
				<span class="cookieDetailTitle">domain:</span><span class="cookieDetailValue">{{currentCookie.domain}}</span>
				<span class="cookieDetailTitle">path:</span><span class="cookieDetailValue">{{currentCookie.path}}</span>
				<span class="cookieDetailTitle">page:</span><span class="cookieDetailValue">{{currentCookie.page}}</span>
			</div>
			<div class="cookieDetailRow">
				<span class="cookieDetailTitle">expiration</span><span class="cookieDetailValue">{{currentCookie.expiration | date:'yyyy-MM-ddTHH:mm:ss.sssZ'}}</span>
				<span class="cookieDetailTitle">days remaining:</span><span class="cookieDetailValue">{{(currentCookie.expiration - currentCookie.ts)/1000/60/60/24 | number:0}}</span>
				<span class="cookieDetailTitle">action:</span><span class="cookieDetailValue">{{currentCookie.action}}</span>
			</div>
			<div class="cookieDetailRow">
				<span class="cookieDetailTitle">value:</span><span class="cookieDetailValue">{{currentCookie.value}}</span>
			</div>
		</div>

		<div class="selectedCookies">
			<div ng-repeat="selection in mySelections | orderBy:ts">
				<div class="cookieDetailBox">
					<div class="cookieDetailRow">
						<span class="cookieDetailTitle">date:</span><span class="cookieDetailValue">{{selection.ts | date:'yyyy-MM-ddTHH:mm:ss.sssZ'}}</span>
						<span class="cookieDetailTitle">name:</span><span class="cookieDetailValue">{{selection.name}}</span>
						<div class="cookieDetailFlags">
							<span class="cookieDetailTitle">secure:</span>
							{{selection.secure == "true" ? "&#x2611;" : "&#x2610;"}}
							<span class="cookieDetailTitle">httpOnly:</span>
							{{selection.httponly == "true" ? "&#x2611;" : "&#x2610;"}}
							<span class="cookieDetailTitle">hostOnly:</span>
							{{selection.hostonly == "true" ? "&#x2611;" : "&#x2610;"}}
						</div>
					</div>
					<div class="cookieDetailRow">
						<span class="cookieDetailTitle">domain:</span><span class="cookieDetailValue">{{selection.domain}}</span>
						<span class="cookieDetailTitle">path:</span><span class="cookieDetailValue">{{selection.path}}</span>
						<span class="cookieDetailTitle">page:</span><span class="cookieDetailValue">{{selection.page}}</span>
					</div>
					<div class="cookieDetailRow">
						<span class="cookieDetailTitle">expiration</span><span class="cookieDetailValue">{{selection.expiration | date:'yyyy-MM-ddTHH:mm:ss.sssZ'}}</span>
						<span class="cookieDetailTitle">days remaining:</span><span class="cookieDetailValue">{{(selection.expiration - selection.ts)/1000/60/60/24 | number:0}}</span>
						<span class="cookieDetailTitle">action:</span><span class="cookieDetailValue">{{selection.action}}</span>
					</div>
					<div class="cookieDetailRow">
						<span class="cookieDetailTitle">value:</span><span class="cookieDetailValue">{{selection.value}}</span>
					</div>
				</div>
			</div>
		</div>	
	</div>

	<!-- build:js scripts/vendor.js -->
	<!-- bower:js -->
	<script src="/bower_components/jquery/jquery.js"></script>
	<script src="/bower_components/angular/angular.js"></script>
	<script src="/bower_components/jquery-ui/ui/jquery-ui.js"></script>
	<script src="/bower_components/ng-grid/build/ng-grid.min.js"></script>
	<!-- endbower -->
	<!-- endbuild -->

	<!-- build:js scripts/popup.js -->
	<script src="scripts/app.js"></script>
	<script src="scripts/popup.js"></script>
	<!-- endbuild -->

</body>
</html>